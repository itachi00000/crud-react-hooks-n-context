(this["webpackJsonpreact-hooks-crud"]=this["webpackJsonpreact-hooks-crud"]||[]).push([[0],{32:function(e,t,a){e.exports=a(62)},61:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(29),l=a.n(c),s=a(9),u=a(1),o=a(10),m=a(15),i="SEARCH_USER",p="ADD_USER",d="DELETE_USER",b="EDIT_USER",E="FETCH_USERS",f="GET_USER",g="EDITING",h="SHOW_ALERT",v="IS_LOADING",y="IS_ERROR";function O(e,t){var a=e.findIndex((function(e){return e.id===t.id}));return[].concat(Object(m.a)(e.slice(0,a)),[t],Object(m.a)(e.slice(a+1)))}function x(e,t){var a=t.type,r=t.payload;switch(a){case p:return Object(u.a)({},e,{users:[].concat(Object(m.a)(e.users),[r])});case b:return Object(u.a)({},e,{users:O(e.users,r)});case g:return Object(u.a)({},e,{editing:r});case i:return Object(u.a)({},e,{searchQuery:r});case d:return Object(u.a)({},e,{users:e.users.filter((function(e){return e.id!==r}))});case E:return Object(u.a)({},e,{users:r,currentUser:null});case f:return Object(u.a)({},e,{currentUser:r});case y:return Object(u.a)({},e,{fetchStatus:Object(u.a)({},e.fetchStatus,{isLoading:!1,isError:r})});case v:return Object(u.a)({},e,{fetchStatus:Object(u.a)({},e.fetchStatus,{isLoading:!0})});case h:return Object(u.a)({},e,{alerts:Object(u.a)({},e.alerts,{alertMsg:r,alertType:t.alertType})});default:return e}}var j={users:[],currentUser:null,searchQuery:"",editing:!1,inputs:{name:"",username:"",email:""},alerts:{alertMsg:"",alertType:"",id:null},fetchStatus:{isLoading:!1,isError:!1,isSuccess:!1}},N=Object(r.createContext)(j),k=a(11);function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{type:h,alertType:t,payload:e}}function U(e){return{type:d,payload:e}}function S(e){return{type:E,payload:e}}function w(e){return{type:f,payload:e}}function D(e){return{type:g,payload:e}}function T(){var e=Object(r.useContext)(N),t=e.searchQuery,a=e.stableDispatch;return n.a.createElement("div",{role:"form"},n.a.createElement("input",{type:"search",name:"search",placeholder:"Type Name",className:"form-control",onChange:function(e){var t;a((t=e.target.value,{type:i,payload:t}))},value:t}))}function R(){return n.a.createElement("header",{className:"jumbotron bg-primary text-white"},n.a.createElement("div",{className:"container"},n.a.createElement("h1",{className:"display-4"},"Header of Page"),n.a.createElement("p",{className:"lead"},"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Alias, veritatis."),n.a.createElement(T,null)))}var A=a(3),F=a.n(A),L=a(7),I=a.n(L),_=a(13);var Q="https://desolate-taiga-56372.herokuapp.com/robots";function M(){var e={name:"",username:"",email:""},t=Object(r.useState)(e),a=Object(o.a)(t,2),c=a[0],l=a[1],s=Object(r.useContext)(N),m=s.dispatch,i=s.stableDispatch,d=function(e){var t=e.target,a=t.name,r=t.value;l(Object(u.a)({},c,Object(_.a)({},a,r)))},b=c.name,E=c.email,f=c.username;return n.a.createElement("div",{className:"col-lg-3 col-md-3"},n.a.createElement("h3",null,"Add Form"),n.a.createElement("form",null,n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"name"},"Name"),n.a.createElement("input",{type:"text",name:"name",value:b,onChange:d,className:"form-control"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"username"},"Username"),n.a.createElement("input",{type:"text",name:"username",value:f,onChange:d,className:"form-control"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",name:"email",value:E,onChange:d,className:"form-control"})),n.a.createElement("button",{type:"button",className:"btn btn-success btn-block",onClick:function(){var t,a,r,n;return F.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,t=c.name,a=c.username,r=c.email,t&&a&&r){s.next=4;break}return s.abrupt("return",i(C("Lack of Info","danger")));case 4:return s.next=6,F.a.awrap(I.a.post("".concat(Q),{name:t,username:a,email:r}));case 6:return n=s.sent,m((u=n.data,{type:p,payload:u})),i(C("Added new User","success")),s.abrupt("return",l(e));case 12:if(s.prev=12,s.t0=s.catch(0),!s.t0.response){s.next=17;break}return console.error("error.response:",s.t0.response.data.msg),s.abrupt("return",i(C(s.t0.response.data.msg,"danger")));case 17:return console.error("error.message: ",s.t0.message),s.abrupt("return",i(C(s.t0.message,"danger")));case 19:return s.prev=19,setTimeout((function(){i(C(""))}),2e3),s.finish(19);case 22:case"end":return s.stop()}var u}),null,null,[[0,12,19,22]])}},"Add")))}function H(){var e=Object(r.useContext)(N),t=e.dispatch,a=e.currentUser,c=e.stableDispatch,l=Object(r.useState)(a),s=Object(o.a)(l,2),m=s[0],i=s[1],p=function(){t(w(null)),t(D(!1)),t(C(""))},d=function(e){var t=e.target,a=t.name,r=t.value;i((function(e){return Object(u.a)({},e,Object(_.a)({},a,r))}))},E=m.name,f=m.email,g=m.username;return n.a.createElement("div",{className:"col-lg-3 col-md-3"},n.a.createElement("h3",null,"Edit Form"),n.a.createElement("form",null,n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"name"},"Name"),n.a.createElement("input",{type:"text",name:"name",value:E,onChange:d,className:"form-control"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"username"},"Username"),n.a.createElement("input",{type:"text",name:"username",value:g,onChange:d,className:"form-control"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",name:"email",value:f,onChange:d,className:"form-control"})),n.a.createElement("div",{className:"clearfix float-right"},n.a.createElement("button",{type:"button",onClick:function(){var e,a,r,n,l;return F.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,e=m.id,a=m.name,r=m.username,n=m.email,a&&r&&n){s.next=4;break}return s.abrupt("return",c(C("Lack of Info","danger")));case 4:return s.next=6,F.a.awrap(I.a.put("".concat(Q,"/").concat(e),{name:a,username:r,email:n}));case 6:return l=s.sent,t((u=l.data,{type:b,payload:u})),c(C("User Updated","primary")),s.abrupt("return",p());case 12:if(s.prev=12,s.t0=s.catch(0),!s.t0.response){s.next=17;break}return console.error("errorResponse: ",s.t0.response.data.msg),s.abrupt("return",c(C(s.t0.response.data.msg,"danger")));case 17:return console.error("errorMsg:",s.t0.message),s.abrupt("return",c(C(s.t0.message,"danger")));case 19:return s.prev=19,setTimeout((function(){c(C(""))}),2e3),s.finish(19);case 22:case"end":return s.stop()}var u}),null,null,[[0,12,19,22]])},className:"btn btn-primary mr-2"},"Update"),n.a.createElement("button",{type:"button",onClick:p,className:"btn btn-outline-danger "},"Cancel"))))}function P(e){var t=e.id,a=Object(r.useContext)(N),c=a.stableDispatch,l=a.dispatch,u=a.users;return n.a.createElement(n.a.Fragment,null,n.a.createElement(s.b,{to:"/read/".concat(t),className:"btn btn-sm btn-info"},"Read"),n.a.createElement("button",{type:"button",className:"btn btn-sm btn-primary",onClick:function(){var e;return F.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t&&u.length){a.next=2;break}return a.abrupt("return");case 2:c(D(!0));try{e=u.find((function(e){return e.id===t})),l(w(e)),c(C("Editing...","info"))}catch(r){console.error(r.message),c(C("Error Edit","danger"))}case 4:case"end":return a.stop()}}))}},"Edit"),n.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:function(){return F.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&u.length){e.next=2;break}return e.abrupt("return");case 2:if(window.confirm("Deleting id:".concat(t,", Are you Sure?"))){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,F.a.awrap(I.a.delete("".concat(Q,"/").concat(t)));case 7:l(U(t)),c(C("Deleted ".concat(t),"primary")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0.message),c(C(e.t0.response.data.msg,"danger"));case 15:return e.prev=15,setTimeout((function(){c(C(""))}),2e3),e.finish(15);case 18:case"end":return e.stop()}}),null,null,[[4,11,15,18]])}},"Delete"))}function G(){var e=Object(r.useContext)(N),t=e.users,a=e.searchQuery,c=e.currentUser,l=e.stableDispatch,s=e.editing;Object(r.useEffect)((function(){console.log("use-effect getAllUser"),function(){var e;F.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.a.awrap(I.a.get("".concat(Q)));case 3:e=t.sent,l(S(e.data)),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),l(C("Error on Fetching","danger")),console.error(t.t0.message);case 11:case"end":return t.stop()}}),null,null,[[0,7]])}()}),[l]),console.log("users:",t),console.log("searchQuery:",a),console.log("currentUser:",c),console.log("editing:",s),console.log("<<<<*******************>>>>");var u=t.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase().trim())})),o=u.map((function(e){var t=e.id,a=e.name,r=e.username,c=e.email;return n.a.createElement("tr",{key:t},n.a.createElement("td",null,t),n.a.createElement("td",null,a),n.a.createElement("td",null,r),n.a.createElement("td",null,c),n.a.createElement("td",null,n.a.createElement(P,{id:t})))}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"col-lg-9 col-md-9"},n.a.createElement("table",{className:"table table-striped"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"ID"),n.a.createElement("th",null,"Name"),n.a.createElement("th",null,"Username"),n.a.createElement("th",null,"Email"),n.a.createElement("th",null,"Action"))),n.a.createElement("tbody",null,u.length?o:n.a.createElement("tr",null,n.a.createElement("td",{colSpan:"5",style:{textAlign:"center"}},"No Data Available...."))))),s?n.a.createElement(H,null):n.a.createElement(M,null))}function B(e){var t=e.alerts,a=t.alertMsg,r=t.alertType;return(n.a.createElement("div",{className:"text-center alert alert-".concat(r)},a||"There must be AlertMsg here"))}function J(){return n.a.createElement("div",{className:"col-md-2 my-4"},n.a.createElement(s.b,{to:"/",className:"btn btn-block btn-lg btn-outline-danger"},"Back"))}function W(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(r.useContext)(N),s=l.currentUser,u=l.users,m=l.searchQuery,i=l.stableDispatch,p=Object(k.g)().id;if(Object(r.useEffect)((function(){console.log("useEffect- getOneUser"),function(){var e;F.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.a.awrap(I.a.get("".concat(Q,"/").concat(p)));case 3:e=t.sent,i(w(e.data)),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("at fetch-a-user",t.t0.message),c(!0);case 11:case"end":return t.stop()}}),null,null,[[0,7]])}()}),[p,i]),console.log("users:",u),console.log("searchQuery:",m),console.log("currentUser:",s),a)return n.a.createElement(k.a,{to:"/error"});if(!s)return n.a.createElement("div",null,"Loading");var d=s.name,b=s.username,E=s.email;return n.a.createElement(n.a.Fragment,null,n.a.createElement(J,null),n.a.createElement("div",{className:"col-md-8"},n.a.createElement("h3",null,"Read Page for ",p),n.a.createElement("p",null,"name: ",d),n.a.createElement("p",null,"username: ",b),n.a.createElement("p",null,"email: ",E)))}var q=function(){return n.a.createElement("div",null,"Error Page")};a(61);l.a.render(n.a.createElement((function(e){var t=e.children,a=Object(r.useReducer)(x,j),c=Object(o.a)(a,2),l=c[0],s=c[1],m=Object(r.useCallback)(s,[]);return n.a.createElement(N.Provider,{value:Object(u.a)({},l,{dispatch:s,stableDispatch:m})},t)}),null,n.a.createElement(s.a,null,n.a.createElement((function(){var e=Object(r.useContext)(N).alerts;return n.a.createElement(n.a.Fragment,null,n.a.createElement(R,null),n.a.createElement("div",{className:"container-fluid"},e.alertMsg?n.a.createElement(B,{alerts:e}):n.a.createElement("div",{style:{height:"67px"}}),n.a.createElement("div",{className:"row justify-content-md-center"},n.a.createElement(k.d,null,n.a.createElement(k.b,{exact:!0,path:"/",component:G}),n.a.createElement(k.b,{exact:!0,path:"/read/:id",component:W}),n.a.createElement(k.b,{exact:!0,path:"/error",component:q}),n.a.createElement(k.b,{component:q})))),n.a.createElement("div",{style:{height:"300px"}}))}),null))),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.3d58c1cf.chunk.js.map